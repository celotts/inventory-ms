Actualiza la documentaci√≥n # üì¶ Inventory Microservices System

Sistema de microservicios desarrollado con Java Spring Boot, Gradle, PostgreSQL y Docker, orientado a la gesti√≥n de productos, configuraci√≥n y descubrimiento de servicios.

---

## üõ†Ô∏è Tecnolog√≠as utilizadas

- Java 17
- Spring Boot 3.x
- Spring Cloud (Eureka, Config Server)
- Gradle
- PostgreSQL
- Docker & Docker Compose
- Portainer (opcional)
- Makefile para automatizaci√≥n

---
## üìÅ Estructura del proyecto
```bash

inventory-ms/
‚îÇ
‚îú‚îÄ‚îÄ config-service/             # Microservicio de configuraci√≥n centralizada
‚îú‚îÄ‚îÄ discovery-service/          # Microservicio Eureka (Service Discovery)
‚îú‚îÄ‚îÄ product-service/            # Microservicio de productos
‚îú‚îÄ‚îÄ infra/                      # Infraestructura Docker
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose-no-usar.yml
‚îú‚îÄ‚îÄ Makefile_old2 old                    # Automatizaci√≥n de tareas
‚îú‚îÄ‚îÄ .env.local                  # Configuraci√≥n local
‚îú‚îÄ‚îÄ .env.dev                    # Configuraci√≥n desarrollo
‚îú‚îÄ‚îÄ .env.prod                   # Configuraci√≥n producci√≥n
‚îî‚îÄ‚îÄ README.md
---
```

## üöÄ Configuraci√≥n y levantamiento por entorno (`local`, `dev`, `prod`)

Este proyecto usa `Makefile` y archivos `.env` para facilitar el levantamiento de entornos con Docker Compose.

---

### üìÅ 1. Crear archivos `.env` por entorno

Crea los siguientes archivos en la ra√≠z del proyecto.

#### ‚úÖ `.env.local`

```env
SPRING_PROFILES_ACTIVE=local
DISCOVERY_PORT=8761
CONFIG_PORT=7777
PRODUCT_PORT=9091
JAVA_OPTS=-Xms128m -Xmx256m
DISCOVERY_SERVICE_HEALTH_URL=http://discovery-service:8761/actuator/health
CONFIG_SERVICE_HEALTH_URL=http://config-service:7777/actuator/health
GIT_USERNAME=your_git_username
GIT_TOKEN=your_github_token
EUREKA_HOST=localhost
DB_HOST=localhost
DB_PORT=5432
DB_NAME=product
DB_USERNAME=postgres
DB_PASSWORD=postgres
```

‚úÖ .env.dev y .env.prod
```
Puedes basarte en .env.local y modificar lo siguiente seg√∫n el entorno:
	‚Ä¢	SPRING_PROFILES_ACTIVE=dev o prod
	‚Ä¢	DB_HOST, GIT_TOKEN, puertos, etc.
```
‚∏ª

‚öôÔ∏è 2. Comandos disponibles con make

‚ñ∂Ô∏è Levantar el entorno deseado
```
make up-local     # Ambiente local
make up-dev       # Ambiente de desarrollo
make up-prod      # Ambiente de producci√≥n
```

üõë Detener todos los servicios
make down
```
üßº Limpiar recursos de Docker
make clean-images    # Elimina im√°genes no usadas
make clean-volumes   # Elimina vol√∫menes no usados
make clean-all       # Elimina todo lo no utilizado
```
```
üìä Administraci√≥n con Portainer (opcional)

Portainer es una herramienta visual para administrar contenedores Docker desde el navegador.

üîº Iniciar Portainer
make portainer-up

	‚Ä¢	Abre http://localhost:9000 en el navegador
	‚Ä¢	Crea un usuario admin si es tu primer uso

üîΩ Detener Portainer
make portainer-stop

üîç Logs de Portainer
make portainer-logs

üß† Recomendaciones
	‚Ä¢	‚ùå No uses credenciales reales (como GIT_TOKEN) en archivos .env versionados.
	‚Ä¢	‚úÖ Aseg√∫rate de agregar .env.local, .env.dev, .env.prod al .gitignore.
	‚Ä¢	üîê En producci√≥n, usa docker secrets, Vault o variables de entorno seguras desde CI/CD.
	‚Ä¢	üîí Portainer es √∫til en desarrollo, pero debe limitarse o eliminarse en producci√≥n.

‚∏ª

```

```
‚úçÔ∏è Edici√≥n del Makefile

Para modificar comandos personalizados, edita el Makefile:
nano Makefile



‚∏ª
```

‚úÖ Ejecuci√≥n de contenedores por entorno
```
make up-dev      # Levantar ambiente de desarrollo
make up-local    # Levantar ambiente local
make up-prod     # Levantar ambiente de producci√≥n
```

üß™ Verificaci√≥n del entorno
```
docker exec -it config-service printenv SPRING_PROFILES_ACTIVE
docker exec -it config-service printenv EUREKA_HOST
```

üîê Acceso a Portainer (por defecto)
```
URL:      http://localhost:9000
Usuario:  admin
Clave:    ce1234567891
```

```
üê≥ Comando manual para levantar Portainer (fuera de Makefile)
docker run -d \
  -p 9000:9000 \
  --name portainer \
  --restart=unless-stopped \
  --cpus="0.25" \
  --memory="150m" \
  -v /var/run/docker.sock:/var/run/docker.sock \
  -v portainer_data:/data \
  portainer/portainer-ce:latest
```

```
‚úÖ Flujo recomendado
1.	Ejecuta Portainer si lo necesitas:
make portainer-up

2.	Luego, seg√∫n el entorno:
make up-local
make up-dev
make up-prod
```
## Puertos recomendados para microservicios


| Microservicio            | Puerto en Docker (`docker-compose`)   | Puerto local (IntelliJ o CLI)   |
|--------------------------|---------------------------------------|---------------------------------|
| `api-gateway`            | `8080:8080`                           | `8080`                          |
| ------------------------ | ------------------------------------- | ------------------------------- |
| `discovery-service`      | `8761:8761`                           | `8761`                          |
| ------------------------ | ------------------------------------- | ------------------------------- |
| `config-service`         | `7777:7777`                           | `7777`                          |
| ------------------------ | ------------------------------------- | ------------------------------- |
| `product-service`        | `9090:9090`                           | `9090`                          |
| ------------------------ | ------------------------------------- | ------------------------------- |
| `inventory-service`      | `9091:9091`                           | `9091`                          |
| ------------------------ | ------------------------------------- | ------------------------------- |
| `order-service`          | `9092:9092`                           | `9092`                          |
| ------------------------ | ------------------------------------- | ------------------------------- |
| `supplier-service`       | `9093:9093`                           | `9093`                          |
| ------------------------ | ------------------------------------- | ------------------------------- |
| `notification-service`   | `9094:9094`                           | `9094`                          |


### üó∫Ô∏è Arquitectura general del sistema

| Servicio     | Base de Datos | Host      | Puerto | Usuario  | Password    |
|:-------------|:--------------|:----------|:-------|:---------|:------------|
| **Product**  | product       | localhost | 5433   | product  | product123  |
| **Supplier** | supplier      | localhost | 5434   | supplier | supplier123 |
| **Purchase** | purchase      | localhost | 5435   | purchase | purchase123 |
| **Tax**      | tax           | localhost | 5436   | tax      | tax123      |
| **Auth**     | auth          | localhost | 5437   | auth     | auth123     |


![img_2.png](img_2.png)

üìÑ Licencia

Este proyecto se distribuye bajo la licencia MIT. Con esto que se modific√≥ en Makefile # Variables
ENV_FILE_LOCAL?=.env.local
ENV_FILE_DEV?=.env.dev
ENV_FILE_PROD?=.env.prod
# Levantar con archivo .env actual (puedes exportar ENV_FILE para cambiarlo)

up-local:
cp $(ENV_FILE_LOCAL) .env
docker compose down -v
docker compose --env-file $(ENV_FILE_LOCAL) up --build

up-dev:
cp $(ENV_FILE_DEV) .env
docker compose down -v
docker compose --env-file $(ENV_FILE_DEV) up --build

up-prod:
cp $(ENV_FILE_PROD) .env
docker compose down -v
docker compose --env-file $(ENV_FILE_PROD) up --build


build-images:
docker build -t inventory/discovery-service ../discovery-service
docker build -t inventory/config-service ../config-service
docker build -t inventory/product-service ../product-service