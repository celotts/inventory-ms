\n\nservices:\n  portainer:\n    image: portainer/portainer-ce\n    container_name: portainer\n    ports:\n      - \"9000:9000\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - portainer_data:/data\n    restart: always\n    networks:\n      - inventory-network\n\n  discovery-service:\n    image: inventory/discovery-service\n    ports:\n      - \"8761:8761\"\n    environment:\n      - SPRING_PROFILES_ACTIVE=local\n    networks:\n      - inventory-network\n\n  config-service:\n    image: inventory/config-service\n    ports:\n      - \"7777:7777\"\n    environment:\n      - SPRING_PROFILES_ACTIVE=local\n      - DISCOVERY_SERVICE_HEALTH_URL=http://discovery-service:8761/actuator/health\n    depends_on:\n      - discovery-service\n    networks:\n      - inventory-network\n\n  product-db:\n    image: postgres:16\n    environment:\n      - POSTGRES_DB=product\n      - POSTGRES_USER=product\n      - POSTGRES_PASSWORD=product123\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - product-data:/var/lib/postgresql/data\n    networks:\n      - inventory-network\n\n  product-service:\n    image: inventory/product-service\n    ports:\n      - \"9091:9091\"\n    environment:\n      - SPRING_PROFILES_ACTIVE=local\n      - SPRING_DATASOURCE_URL=jdbc:postgresql://product-db:5432/product\n      - SPRING_DATASOURCE_USERNAME=product\n      - SPRING_DATASOURCE_PASSWORD=product123\n      - SPRING_CONFIG_IMPORT=optional:configserver:http://config-service:7777\n      - JAVA_OPTS=-Xms128m -Xmx256m\n    depends_on:\n      - discovery-service\n      - config-service\n      - product-db\n    networks:\n      - inventory-network\n\nnetworks:\n  inventory-network:\n    driver: bridge\n\nvolumes:\n  product-data:\n  portainer_data:\n